# 个人消费信贷申请评分卡（A卡）模型

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## 1. 项目概述

本项目是一个完整的、端到端的信用风险评分卡（A卡）开发案例。项目基于经典的 [LendingClub 公开数据集](https://www.kaggle.com/datasets/wordsforthewise/lending-club)，采用金融风控领域标准的建模流程，从数据清洗、探索性数据分析（EDA）、特征工程、模型训练、模型评估直到最终生成可供业务使用的标准评分卡，完整地复现了A卡建模的全过程。

**项目亮点**:
- **全流程实践**: 覆盖了A卡建模的所有核心环节，逻辑清晰，步骤完整。
- **专业的特征工程**: 包含自动分箱（决策树）与手动调整（单调性、业务逻辑）相结合的WOE分箱策略。
- **严谨的模型评估**: 使用了AUC、KS、PSI、增益图（Gains Chart）等多维度指标对模型进行全面、深入的评估。
- **业务落地导向**: 最终产出物是一张可直接解读和部署的标准评分卡，而非仅仅一个模型。

---

## 2. 建模工作流

本项目严格遵循金融风控建模的专业流程：

1.  **数据预处理**:
    - **数据清洗**: 加载数据，剔除无关变量、贷后变量以及信息泄露变量。
    - **时间窗口选择**: 选取2007-2014年的数据，保证贷款有明确的最终状态。
    - **样本定义**: 定义“好客户”（Fully Paid）与“坏客户”（Charged Off / Default）。
    - **数据抽样**: 为解决样本不均衡问题，进行分层抽样，构建10万条均衡样本（坏客户率约40%）。

2.  **探索性数据分析 (EDA)**:
    - 对数值型和类别型特征的分布进行可视化，理解数据基本形态。
    - 分析关键特征与坏账率（Bad Rate）的关系，初步判断特征的预测能力。

3.  **特征工程**:
    - **特征衍生**: 基于业务理解构造了12个新特征，如 `loan_to_inc_ratio`（贷收比）、`disposable_monthly_inc`（可支配月收入）等。
    - **分箱与WOE转换**: 对特征进行分箱，并计算WOE值和IV值。
    - **特征筛选**: 结合IV值（>0.02）、多重共线性（相关系数<0.7）和人工审核，最终确定**10个**入模特征。
    - **手动调优**: 对 `bc_open_to_buy`, `verification_status` 等特征的分箱进行了手动调整，以保证风险趋势的单调性和业务合理性。

4.  **模型训练**:
    - **算法**: 使用**逻辑回归 (Logistic Regression)**，因其稳定性、可解释性强，是评分卡建模的基准算法。
    - **输入**: 将10个最终特征的WOE值作为模型输入。
    - **数据集**: 按7:3划分为训练集和测试集。

5.  **模型评估**:
    - **区分能力**: 计算AUC、KS值。
    - **稳定性**: 比较训练集与测试集性能差异，并计算最终评分的**PSI** (群体稳定性指数)。
    - **业务价值**: 绘制**增益图 (Gains Chart)**，量化模型的风险识别效率。

6.  **评分卡转换**:
    - **参数设定**: 设定基础分600，PDO（Points to Double the Odds）为20。
    - **分数换算**: 将逻辑回归模型转换为标准评分卡，计算出每个特征每个分箱对应的得分。

---

## 3. 模型性能与成果

### 最终模型性能

| 指标 | 训练集 | 测试集 | 工业界标准 | 评估 |
| :--- | :--- | :--- | :--- | :--- |
| **AUC** | 0.6984 | **0.6946** | > 0.65 | **良好** |
| **KS** | 0.2907 | **0.2856** | > 0.25 | **良好** |
| **PSI** | \- | **0.0008** | < 0.1 | **非常稳定** |

### 关键可视化成果

**ROC 曲线 (区分度与稳定性)**
![ROC Curve](images/roc_curve.png)
*结论: 训练集与测试集曲线高度重合，AUC差异极小，模型稳定无过拟合。*

**评分分布 (好坏客群分离度)**
![Score Distribution](images/score_distribution.png)
*结论: 好客户（绿色）分数显著高于坏客户（红色），模型能有效区分不同风险的客群。*

---

## 4. 仓库结构
