# 信用评分卡（A卡）特征分析报告

## 1. 报告概述

本报告旨在详细记录 LendingClub 个人信贷申请评分卡（A卡）建模项目中的特征工程与筛选全过程。报告从一个广泛的初始特征池出发，经过数据预处理、特征衍生、多轮筛选（包括信息价值IV评估、多重共线性检验和业务逻辑人工审核），最终确定了用于构建逻辑回归模型的10个核心预测变量。此流程确保了最终入模的特征具备良好的预测能力、稳定性及业务可解释性。

- **项目目标**: 筛选并处理出一组高质量的特征，用于构建一个稳定、准确、可解释的信用风险模型。
- **最终成果**: 确定了10个最终入模特征，并完成了它们的WOE（证据权重）分箱，为后续模型训练和评分卡转换奠定了坚实基础。

## 2. 初始特征池

在对原始数据进行初步清洗（剔除ID类、贷后信息及无关变量）后，我们得到了一个包含**65个**原始特征的数据集。这些特征覆盖了申请人的基本信息、信贷历史、债务状况等多个维度。在此基础上，我们通过特征衍生，将特征池扩大至**77个**候选特征。

## 3. 特征预处理

为了提升特征质量和模型稳定性，我们对所有候选特征进行了以下预处理：

- **缺失值处理**:
    - **特殊值填充**: 对部分时间间隔类特征（如 `mths_since_recent_inq`），使用特殊值（如 `999`）进行填充，以保留其“缺失”状态所蕴含的信息。
    - **零值填充**: 对部分账户或余额类特征，使用 `0` 进行填充，符合业务直觉（如无记录则为0）。
    - **中位数填充**: 对其他分布较为稳定的连续型特征（如 `dti`），使用**中位数**进行填充，以减少极端值的影响。

- **异常值处理**:
    - **盖帽处理（Winsorizing）**: 为防止模型受到极端异常值的干扰，我们对所有数值型特征进行了盖帽处理。对大部分变量采用 **1% 和 99%** 分位点进行盖帽，对偏态极高的变量（如 `annual_inc`）采用更严格的 **99.5%** 分位点进行上限盖帽。

## 4. 特征衍生

为了捕捉原始变量之间可能存在的非线性关系和比率关系，我们基于业务理解构造了12个新的衍生特征。最终入模的特征中也包含了这些高质量的衍生变量。

**衍生的关键特征示例**:
- `loan_to_inc_ratio`: 贷款金额与年收入之比，衡量债务负担。
- `disposable_monthly_inc`: 可支配月收入，评估还款能力。
- `recent_acc_ratio`: 近期开户数与总账户数之比，反映近期信贷活跃度。
- `fico_div_dti`: FICO分与DTI之比，综合评估信用水平和债务水平。
- `has_derogatory_record`: 是否有不良记录的虚拟变量。

## 5. 特征筛选与评估

我们采用“自动筛选”与“人工审核”相结合的方式，对77个候选特征进行了三轮筛选。

### 5.1 IV (Information Value) 初步筛选

我们首先计算了所有候选特征的IV值，以评估其对目标变量（好/坏客户）的预测能力。

- **筛选标准**: `IV >= 0.02`
- **结果**: 共有 **38个** 特征通过了此轮筛选，具备了进入下一步分析的资格。

### 5.2 多重共线性检验

为了避免模型因特征间高度相关而导致系数不稳定，我们对通过IV筛选的数值型特征进行了相关性分析。

- **筛选标准**: 两个特征间相关系数的绝对值 `> 0.7`
- **决策规则**: 当两个特征高度相关时，保留**IV值更高**的那个。
- **主要决策**: 此步骤识别出了 `bc_util` 和 `bc_open_to_buy` 等变量之间的高度相关性，为后续的人工决策提供了依据。

### 5.3 人工审核与业务逻辑调整

这是特征工程最关键的一步。我们对自动分箱的结果进行了细致的人工审核，并对部分变量进行了手动调整，以确保其风险趋势符合业务逻辑。

- **`verification_status`**:
    - **问题**: `Verified` 和 `Source Verified` 两个类别的坏账率几乎完全相同。
    - **调整**: 将这两个类别**合并**为 `Verified/Source Verified`，提升了分箱的区分度和业务意义。
- **`bc_open_to_buy`**:
    - **问题**: 自动分箱结果的坏账率趋势不单调，不符合“可用额度越高，风险越低”的业务逻辑。
    - **调整**: **手动设定分箱切点**，合并了破坏趋势的箱体，确保了风险的单调性。
- **`bc_util`**:
    - **问题**: 同样存在自动分箱不单调的问题。
    - **调整**: 在修正其分箱后，与 `bc_open_to_buy` 进行了综合比较。根据“保留更高IV值”的原则，最终未被选入模型。


## 6. 最终入模特征 (Final Selected Features)

经过上述流程，最终确定了10个入模特征。这些特征在预测能力、稳定性、独立性和业务可解释性之间取得了最佳平衡。

| 特征名称 (Feature Name)      | 最终IV值 (Final IV) | 数据类型 (Type) | 入选理由                       |
| :------------------------- | :---------------- | :-------------- | :----------------------------- |
| `int_rate`                 | 0.3810            | Continuous      | IV值最高，核心风险变量         |
| `term`                     | 0.1920            | Categorical     | IV值高，显著区分长短期贷款风险 |
| `loan_to_inc_ratio`        | 0.1211            | Continuous      | 关键衍生特征，衡量债务负担     |
| `fico_range_high`          | 0.1090            | Continuous      | 核心信用历史变量，IV值高       |
| `recent_acc_ratio`         | 0.0666            | Continuous      | 衍生特征，反映近期信贷扩张风险 |
| `fico_div_dti`             | 0.0657            | Continuous      | 衍生特征，综合信用与负债       |
| `acc_open_past_24mths`     | 0.0557            | Continuous      | 关键行为变量，预测能力强       |
| `bc_open_to_buy`           | 0.0508            | Continuous      | 经手动调整，趋势单调，预测能力强 |
| `disposable_monthly_inc`   | 0.0441            | Continuous      | 衍生特征，直观衡量还款能力     |
| `verification_status`      | 0.0418            | Categorical     | 经手动合并，类别风险区分清晰     |
